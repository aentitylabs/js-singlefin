{"version":3,"file":"singlefin.js","mappings":"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","sources":["webpack://jssinglefin/webpack/universalModuleDefinition","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/follower.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/influencer.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/nullstate.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/state.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/main.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefin.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefinsession.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefinsource.ts","webpack://jssinglefin/external umd {\"commonjs\":\"js-entity-store\",\"commonjs2\":\"js-entity-store\",\"amd\":\"jsentitystore\",\"root\":\"jsentitystore\"}","webpack://jssinglefin/webpack/bootstrap","webpack://jssinglefin/webpack/before-startup","webpack://jssinglefin/webpack/startup","webpack://jssinglefin/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"js-entity-store\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jsentitystore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jssinglefin\"] = factory(require(\"js-entity-store\"));\n\telse\n\t\troot[\"jssinglefin\"] = factory(root[\"jsentitystore\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_js_entity_store__) {\nreturn ","import { Influencer } from \"./influencer\";\nimport { NullState } from \"./nullstate\";\nimport { State } from \"./state\";\n\nexport class Follower {\n    private _name: string;\n    private _state: State = new NullState();\n    private _influencers: Influencer[] = [];\n    private _states: any = {};\n    private _trendStates: any = {};\n\n\n    public constructor(name: string) {\n        this._name = name;\n    }\n\n    public get name() {\n        return this._name;\n    }\n    \n    public addInfluencer(influencer: Influencer) {\n        this._influencers.push(influencer);\n    }\n\n    public addState(stateName: string, state: State) {\n        state.name = stateName;\n\n        this._states[stateName] = state;\n    }\n\n    public subscribe(influencer: Influencer) {\n        this.addInfluencer(influencer);\n\n        influencer.subscribe(this);\n    }\n\n    public follow(trend: string) {\n        this._influencers.forEach((influencer: Influencer) => {\n            influencer.follow(trend, this._name);\n        });\n    }\n\n    public on(trend: string, state: string) {\n        this._trendStates[trend] = this._states[state];\n    }\n\n    public changeState(state: string) {\n        this._state = this._states[state];\n    }\n\n    public handle(trend: string, model: any): void {\n        this._state.handle(this, trend, model);\n    }\n\n    public onTrendChange(trend: string, model: any): void {\n        if(this._trendStates[trend]) {\n            this._state = this._trendStates[trend];\n        }\n        \n        this.handle(trend, model);\n    }\n\n    public set state(state: State) {\n        this._state = state;\n    }\n\n    public serialize(): any {\n        return {\n            name: this._name,\n            state: this._state.name\n        }\n    }\n\n    public deserialize(follower: any) {\n        this._name = follower.name;\n        this._state = this._states[follower.state];\n    }\n}","import { Follower } from \"./follower\";\n\nexport class Influencer {\n    protected _followers: any = {};\n    protected _trends: any = {};\n\n\n    public subscribe(follower: Follower){\n        this._followers[follower.name] = follower;\n    }\n\n    public init(trends: any) {\n        for(const key in trends) {\n            const followers = trends[key];\n\n            for(let i=0; i<followers.length; i++) {\n                if(this._followers[followers[i].name]) {\n                    const follower = this._followers[followers[i].name];\n\n                    follower.deserialize(followers[i]);\n                }\n            }\n        }\n    }\n\n    public follow(trend: string, follower: string) {\n        if(!this._trends[trend]) {\n            this._trends[trend] = [];\n        }\n        \n        this._trends[trend].push(this._followers[follower]);\n    }\n\n    public newTrend(trend: string, model: any) {\n        const followers = this._trends[trend];\n\n        if(!followers) {\n            return;\n        }\n\n        for(let i=0; i<followers.length; i++) {\n            followers[i].onTrendChange(trend, model);\n        }\n    }\n\n    public serialize(): any {\n        const influencer: any = {\n            followers: {}\n        };\n\n        for(const key in this._followers) {\n            const follower = this._followers[key];\n            \n            influencer.followers[key] = follower.serialize();\n        }\n\n        return influencer;\n    }\n}","import { Follower } from \"./follower\";\nimport { State } from \"./state\";\n\nexport class NullState extends State {\n    public handle(follower: Follower, trend: string, model: any): void {\n        \n    }\n}","import { Follower } from \"./follower\";\n\nexport abstract class State {\n    private _name: string = \"\";\n\n\n    public set name(name: string) {\n        this._name = name;\n    }\n\n    public get name() {\n        return this._name;\n    }\n\n    public abstract handle(follower: Follower, trend: string, model: any): void;\n}","import { Singlefin } from \"./singlefin\";\nimport { SinglefinSession } from \"./singlefinsession\";\nimport { Follower } from \"./influencer/follower\";\nimport { State } from \"./influencer/state\";\n\n\nexport { Singlefin, SinglefinSession, Follower, State }","import { SinglefinSession } from \"./singlefinsession\";\nimport { Follower } from \"./main\";\n\ndeclare const SINGLEFIN_MODEL: any;\n\n\nexport class Singlefin {\n    private static _handlers: any = {};\n    private static _model: any = SINGLEFIN_MODEL;\n    private static _sources: any = {};\n    private static _bridges: any = {};\n    private static _states: any = {};\n\n\n    public static newSession(name: string, configuration: any) {\n        const session = new SinglefinSession();\n\n        session.loadModel(Singlefin._model);\n\n        for(const source in Singlefin._sources) {\n            session.addSource(Singlefin._sources[source].name, new Singlefin._sources[source]());\n        }\n\n        const app = new Follower(name);\n        \n        app.subscribe(session);\n\n        for(const state in Singlefin._states) {\n            app.addState(Singlefin._states[state].name, new Singlefin._states[state]());\n        }\n        \n        const trends: any = {};\n\n        for(const trend in configuration.trends) {\n            app.follow(trend);\n\n            if(configuration.trends[trend].hasOwnProperty(\"defaultstate\")) {\n                app.on(trend, configuration.trends[trend][\"defaultstate\"]);\n            }\n\n            if(configuration.trends[trend].hasOwnProperty(\"initialstate\")) {\n                trends[trend] = [];\n                trends[trend].push({\n                    name: name,\n                    state: configuration.trends[trend][\"initialstate\"]\n                });\n            }\n\n            if(configuration.trends[trend].hasOwnProperty(\"defaultstate\")) {\n                app.on(trend, configuration.trends[trend][\"defaultstate\"]);\n            }\n        }\n\n        session.init(trends);\n\n        return session;\n    }\n\n    public static set handlers(value: any) {\n        Singlefin._handlers[value.name] = value;\n    }\n\n    public static set model(value: any) {\n        Singlefin._model[value.name] = value;\n    }\n\n    public static set sources(value: any) {\n        Singlefin._sources[value.name] = value;\n    }\n\n    public static set bridges(value: any) {\n        Singlefin._bridges[value.name] = value;\n    }\n\n    public static set states(value: any) {\n        Singlefin._states[value.name] = value;\n    }\n}\n","import { Bridge, EntityFactory, EntityStore, Source } from \"js-entity-store\";\nimport { Influencer } from \"./influencer/influencer\";\nimport { SinglefinSource } from \"./singlefinsource\";\n\nexport class SinglefinSession extends Influencer {\n    private _entityStore: EntityStore = new EntityStore();\n    private _model: any;\n    private _currentTrend: any;\n\n    public constructor() {\n        super();\n\n        this._currentTrend = EntityFactory.newEntity(this._entityStore, {\n            \"entity\": \"Singlefin\",\n            \"ref\": false,\n            \"properties\": {\n                \"trend\": {\n                    \"value\": \"\"\n                },\n                \"trends\": {\n                    \"value\": {}\n                }\n            }\n        });\n\n        this._entityStore.addSource(\"Singlefin\", new SinglefinSource());\n    }\n\n    public loadModel(model: any) {\n        this._model = EntityFactory.newEntity(this._entityStore, model);\n    }\n\n    public get model(): any {\n        return this._model;\n    }\n\n    public addSource(entityName: string, source: Source) {\n        this._entityStore.addSource(entityName, source);\n    }\n\n    public inform(trend: string) {\n        const followers = this._trends[trend];\n\n        this._currentTrend.trend = trend;\n        this._currentTrend.trends[trend] = this.serializeFollowers(followers);\n\n        this._entityStore.sync();\n\n        this.newTrend(trend, this._model);\n\n        this._entityStore.sync();\n    }\n\n    public informTo(bridge: Bridge, trend: string) {\n        const followers = this._trends[trend];\n\n        this._currentTrend.trend = trend;\n        this._currentTrend.trends[trend] = this.serializeFollowers(followers);\n\n        return this._entityStore.syncTo(bridge).then(() => {\n            this.init(this._currentTrend.trends);\n\n            this.newTrend(this._currentTrend.trend, this._model);\n\n            return this._entityStore.syncTo(bridge);\n        });\n    }\n\n    public informFrom(bridge: Bridge, actions: any) {\n        this._entityStore.syncFrom(bridge, actions, () => {\n            this.init(this._currentTrend.trends);\n\n            this.newTrend(this._currentTrend.trend, this._model);\n\n            const followers = this._trends[this._currentTrend.trend];\n\n            this._currentTrend.trends[this._currentTrend.trend] = this.serializeFollowers(followers);\n        });\n    }\n\n    private serializeFollowers(followers: any[]) {\n        const serializedFollowers = [];\n\n        for(let i=0; i<followers.length; i++) {\n            serializedFollowers.push(followers[i].serialize());\n        }\n\n        return serializedFollowers;\n    }\n}","import { Source } from \"js-entity-store\";\n\nexport class SinglefinSource extends Source {\n    public load(entity: any) {\n        return entity;\n    }\n    public update(entity: any) {\n        return entity;\n    }\n    public delete(entity: any): void {\n    }\n    \n}","module.exports = __WEBPACK_EXTERNAL_MODULE_js_entity_store__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./main.ts\");\n",""],"names":[],"sourceRoot":""}