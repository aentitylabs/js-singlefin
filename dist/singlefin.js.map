{"version":3,"file":"singlefin.js","mappings":"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","sources":["webpack://jssinglefin/webpack/universalModuleDefinition","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/follower.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/influencer.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/nullstate.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/influencer/state.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/main.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/service.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefin.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefinhtmltemplateenginehandler.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefinsession.ts","webpack://jssinglefin/./home/eagudio/work/aentity/workspace/js-singlefin/src/singlefinsource.ts","webpack://jssinglefin/external commonjs \"js-entity-store\"","webpack://jssinglefin/external commonjs \"js-html-template-engine\"","webpack://jssinglefin/webpack/bootstrap","webpack://jssinglefin/webpack/before-startup","webpack://jssinglefin/webpack/startup","webpack://jssinglefin/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jssinglefin\"] = factory();\n\telse\n\t\troot[\"jssinglefin\"] = factory();\n})(this, function() {\nreturn ","import { Influencer } from \"./influencer\";\nimport { NullState } from \"./nullstate\";\nimport { State } from \"./state\";\n\nexport class Follower {\n    private _name: string;\n    private _state: State = new NullState();\n    private _influencers: Influencer[] = [];\n    private _states: any = {};\n    private _trendStates: any = {};\n\n\n    public constructor(name: string) {\n        this._name = name;\n    }\n\n    public get name() {\n        return this._name;\n    }\n    \n    public addInfluencer(influencer: Influencer) {\n        this._influencers.push(influencer);\n    }\n\n    public addState(stateName: string, state: State) {\n        state.name = stateName;\n\n        this._states[stateName] = state;\n    }\n\n    public subscribe(influencer: Influencer) {\n        this.addInfluencer(influencer);\n\n        influencer.subscribe(this);\n    }\n\n    public follow(trend: string) {\n        this._influencers.forEach((influencer: Influencer) => {\n            influencer.follow(trend, this._name);\n        });\n    }\n\n    public on(trend: string, state: string) {\n        this._trendStates[trend] = this._states[state];\n    }\n\n    public changeState(state: string) {\n        this._state = this._states[state];\n    }\n\n    public handle(influencer: Influencer, trend: string, model: any): void {\n        this._state.handle(influencer, this, trend, model);\n    }\n\n    public onTrendChange(influencer: Influencer, trend: string, model: any): void {\n        if(this._trendStates[trend]) {\n            this._state = this._trendStates[trend];\n        }\n        \n        this.handle(influencer, trend, model);\n    }\n\n    public set state(state: State) {\n        this._state = state;\n    }\n\n    public serialize(): any {\n        return {\n            name: this._name,\n            state: this._state.name\n        }\n    }\n\n    public deserialize(follower: any) {\n        this._name = follower.name;\n        this._state = this._states[follower.state];\n    }\n}","import { Follower } from \"./follower\";\n\nexport class Influencer {\n    protected _followers: any = {};\n    protected _trends: any = {};\n    protected _context: any;\n\n\n    public set context(value: any) {\n        this._context = value;\n    }\n\n    public get context() {\n        return this._context;\n    }\n\n    public subscribe(follower: Follower){\n        this._followers[follower.name] = follower;\n    }\n\n    public init(trends: any) {\n        for(const key in trends) {\n            const followers = trends[key];\n\n            for(let i=0; i<followers.length; i++) {\n                if(this._followers[followers[i].name]) {\n                    const follower = this._followers[followers[i].name];\n\n                    follower.deserialize(followers[i]);\n                }\n            }\n        }\n    }\n\n    public follow(trend: string, follower: string) {\n        if(!this._trends[trend]) {\n            this._trends[trend] = [];\n        }\n        \n        this._trends[trend].push(this._followers[follower]);\n    }\n\n    public newTrend(trend: string, model: any) {\n        const followers = this._trends[trend];\n\n        if(!followers) {\n            return;\n        }\n\n        for(let i=0; i<followers.length; i++) {\n            followers[i].onTrendChange(this, trend, model);\n        }\n    }\n\n    public serialize(): any {\n        const influencer: any = {\n            followers: {}\n        };\n\n        for(const key in this._followers) {\n            const follower = this._followers[key];\n            \n            influencer.followers[key] = follower.serialize();\n        }\n\n        return influencer;\n    }\n}","import { Follower } from \"./follower\";\nimport { Influencer } from \"./influencer\";\nimport { State } from \"./state\";\n\nexport class NullState extends State {\n    public handle(influencer: Influencer, follower: Follower, trend: string, model: any): void {\n        \n    }\n}","import { Follower } from \"./follower\";\nimport { Influencer } from \"./influencer\";\n\nexport abstract class State {\n    private _name: string = \"\";\n\n\n    public set name(name: string) {\n        this._name = name;\n    }\n\n    public get name() {\n        return this._name;\n    }\n\n    public abstract handle(influencer: Influencer, follower: Follower, trend: string, model: any): void;\n}","import { Singlefin } from \"./singlefin\";\nimport { SinglefinSession } from \"./singlefinsession\";\nimport { Follower } from \"./influencer/follower\";\nimport { State } from \"./influencer/state\";\nimport { HtmlTemplateEngine } from \"js-html-template-engine\";\nimport { SinglefinHtmlTemplateEngineHandler } from \"./singlefinhtmltemplateenginehandler\";\nimport { Service } from \"./service\";\n\ndeclare const SINGLEFIN_APP_NAME: string;\ndeclare const SINGLEFIN_REGISTRY: any;\ndeclare const SINGLEFIN_TRENDS: any;\ndeclare const SINGLEFIN_MODEL: any;\ndeclare const SINGLEFIN_PAGES: any;\ndeclare const SINGLEFIN_PAGES_COMPONENTS: any;\n\n\nconst singlefin: any = {\n    _serviceInstances: {},\n    services: {},\n    handlers: {},\n    sources: {},\n    states: {},\n    bridges: {},\n    exports: {\n        set services(value: any) {\n            singlefin.services[value.name] = value;\n        },\n        set handlers(value: any) {\n            singlefin.handlers[value.name] = value;\n        },\n        set sources(value: any) {\n            singlefin.sources[value.name] = value;\n        },\n        set states(value: any) {\n            singlefin.states[value.name] = value;\n        },\n        set bridges(value: any) {\n            singlefin.bridges[value.name] = value;\n        }\n    },\n    registry: SINGLEFIN_REGISTRY,\n    start: (() => {\n        for(const service in singlefin.services) {\n            singlefin._serviceInstances[service] = new singlefin.services[service]();\n\n            singlefin._serviceInstances[service].run();\n        }\n    }),\n    newSession: ((data: any = {}) => {\n        const session = Singlefin.newSession(SINGLEFIN_APP_NAME, singlefin.bridges, singlefin.sources, singlefin.states, SINGLEFIN_MODEL, SINGLEFIN_TRENDS, SINGLEFIN_PAGES, SINGLEFIN_PAGES_COMPONENTS, singlefin.handlers, data);\n    \n        return session;\n    })\n};\n\nexport { Singlefin, SinglefinSession, Service, Follower, State, singlefin }","export abstract class Service {\n    public abstract run(): any;\n}","import { SinglefinSession } from \"./singlefinsession\";\nimport { Follower } from \"./main\";\n\n\nexport class Singlefin {\n    public static newSession(name: string, bridges: any, sources: any, states: any, model: any, trends: any, pages: any, pagesComponents: any, handlers: any, data: any) {\n        const session = new SinglefinSession(pages, pagesComponents, handlers);\n\n        for(const bridge in bridges) {\n            session.addBridge(bridges[bridge].name, new bridges[bridge](data));\n        }\n\n        for(const source in sources) {\n            session.addSource(sources[source].name, new sources[source](data));\n        }\n\n        session.loadModel(model);\n\n        const app = new Follower(name);\n        \n        app.subscribe(session);\n\n        for(const state in states) {\n            app.addState(states[state].name, new states[state]());\n        }\n        \n        const initialTrends: any = {};\n\n        for(const trend in trends) {\n            app.follow(trend);\n\n            if(trends[trend].hasOwnProperty(\"defaultstate\")) {\n                app.on(trend, trends[trend][\"defaultstate\"]);\n            }\n\n            if(trends[trend].hasOwnProperty(\"initialstate\")) {\n                initialTrends[trend] = [];\n                initialTrends[trend].push({\n                    name: name,\n                    state: trends[trend][\"initialstate\"]\n                });\n            }\n\n            if(trends[trend].hasOwnProperty(\"defaultstate\")) {\n                app.on(trend, trends[trend][\"defaultstate\"]);\n            }\n        }\n\n        session.init(initialTrends);\n\n        return session;\n    }\n}\n","import { HtmlTemplateEngineHandler } from \"js-html-template-engine\";\nimport { Component } from \"js-template-engine\";\n\n\nexport class SinglefinHtmlTemplateEngineHandler implements HtmlTemplateEngineHandler {\n    private _callback: any;\n\n\n    public constructor(callback: any) {\n        this._callback = callback;\n    }\n\n    public onChangeLayout(layout: string, component: Component, data?: any): void {\n        if(!this._callback) {\n            return;\n        }\n\n        this._callback(layout, component, data);\n    }\n}","import { Bridge, EntityFactory, EntityStore, Source } from \"js-entity-store\";\nimport { HtmlTemplateEngine } from \"js-html-template-engine\";\nimport { Component } from \"js-template-engine\";\nimport { Influencer } from \"./influencer/influencer\";\nimport { SinglefinHtmlTemplateEngineHandler } from \"./singlefinhtmltemplateenginehandler\";\nimport { SinglefinSource } from \"./singlefinsource\";\n\nexport class SinglefinSession extends Influencer {\n    private _entityStore: EntityStore = new EntityStore();\n    private _pages: any;\n    private _pagesComponents: any;\n    private _handlers: any;\n    private _model: any;\n    private _data: any;\n\n    public constructor(pages?: any, pagesComponents?: any, handlers?: any) {\n        super();\n\n        this._pages = pages;\n        this._pagesComponents = pagesComponents;\n        this._handlers = handlers;\n\n        this.context = EntityFactory.newEntity(this._entityStore, {\n            \"entity\": \"Singlefin\",\n            \"ref\": false,\n            \"properties\": {\n                \"trend\": {\n                    \"value\": \"\"\n                },\n                \"trends\": {\n                    \"value\": {}\n                },\n                \"page\": \"\",\n                \"layout\": \"\"\n            }\n        });\n\n        this._entityStore.addSource(\"Singlefin\", new SinglefinSource());\n    }\n\n    public set data(value: any) {\n        this._data = value;\n    }\n\n    public get data() {\n        return this._data;\n    }\n\n    public loadModel(model: any) {\n        this._model = EntityFactory.newEntity(this._entityStore, model);\n    }\n\n    public get model(): any {\n        return this._model;\n    }\n\n    public addBridge(bridgeName: string, bridge: Bridge) {\n        this._entityStore.addBridge(bridgeName, bridge);\n    }\n\n    public addSource(entityName: string, source: Source) {\n        this._entityStore.addSource(entityName, source);\n    }\n\n    public inform(trend: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            const followers = this._trends[trend];\n\n            this.context.trend = trend;\n            this.context.trends[trend] = this.serializeFollowers(followers);\n\n            this._entityStore.sync(() => {\n                this.newTrend(trend, this._model);\n\n                this._entityStore.sync(() => {\n                    resolve();\n                });\n            });\n        });\n    }\n\n    public informTo(bridge: string, trend: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            const followers = this._trends[trend];\n\n            this.context.trend = trend;\n\n            if(followers) {\n                this.context.trends[trend] = this.serializeFollowers(followers);   \n            }\n    \n            this._entityStore.syncTo(bridge, () => {\n                this.init(this.context.trends);\n    \n                this.newTrend(this.context.trend, this._model);\n    \n                this._entityStore.syncTo(bridge, () => {\n                    resolve();\n                });\n            });\n        });\n    }\n\n    public informFrom(bridge: string, actions: any): Promise<void> {\n        return new Promise((resolve, reject) => {\n            this._entityStore.syncFrom(bridge, actions, () => {\n                this.init(this.context.trends);\n\n                this.newTrend(this.context.trend, this._model);\n\n                const followers = this._trends[this.context.trend];\n\n                if(!followers) {\n                    return resolve;\n                }\n\n                this.context.trends[this.context.trend] = this.serializeFollowers(followers);\n            }, () => {\n                resolve();\n            });\n        });\n    }\n\n    public render(windowObject: any, layout?: string, bridge?: string, trend?: string) {\n        let pageLayout: string = this.context.layout;\n\n        if(layout) {\n            pageLayout = layout;\n        }\n\n        if(bridge && trend) {\n            this.informTo(bridge, trend).then(() => {\n                this.renderPage(windowObject, this.context.page, pageLayout, bridge);\n            }).catch((errorStatus: any) => {\n                console.log(\"inform error: \" + errorStatus)\n            });\n        }\n        else {\n            this.renderPage(windowObject, this.context.page, pageLayout, bridge);\n        }\n    }\n\n    private renderPage(windowObject: any, page: string, layout?: string, bridge?: string) {\n        const htmlTemplateEngine = new HtmlTemplateEngine(windowObject);\n\n        htmlTemplateEngine.htmlTemplateEngineHandler = new SinglefinHtmlTemplateEngineHandler((layout: string, component: Component, data: any) => {\n            if(bridge && data && data.trend) {\n                this.informTo(bridge, data.trend).then(() => {\n                    component.changeLayout(this.context.layout);\n                }).catch((errorStatus: any) => {\n                    console.log(\"inform error: \" + errorStatus)\n                });\n            }\n        });\n\n        for(const handler in this._handlers) {\n            htmlTemplateEngine.addComponentHandler(handler.toLowerCase(), this._handlers[handler]);\n        }\n    \n        for(const component in this._pagesComponents) {\n            htmlTemplateEngine.addComponent(component, this._pagesComponents[component]);\n        }\n    \n        htmlTemplateEngine.render(this._pages[page], layout, this.model);\n    }\n\n    private serializeFollowers(followers: any[]) {\n        const serializedFollowers = [];\n\n        for(let i=0; i<followers.length; i++) {\n            serializedFollowers.push(followers[i].serialize());\n        }\n\n        return serializedFollowers;\n    }\n}","import { Source } from \"js-entity-store\";\n\nexport class SinglefinSource extends Source {\n    public load(entity: any, onLoad: any) {\n        onLoad(entity);\n    }\n    public update(entity: any, onUpdate: any) {\n        onUpdate(entity);\n    }\n    public delete(entity: any, onDelete: any): void {\n        onDelete();\n    }\n    \n}","module.exports = require(\"js-entity-store\");","module.exports = require(\"js-html-template-engine\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./main.ts\");\n",""],"names":[],"sourceRoot":""}